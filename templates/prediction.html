<!DOCTYPE html>
<html>
<head>
    <title>Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='prediction.css') }}">
</head>
<body>

<!-- ✅ Navbar -->
<div class="navbar">
    <a href="/">Home</a>
    <a href="/about">About</a>
    <a href="/prediction">Predict</a>
    <a href="/contact">Contact</a>
    <a href="/logout">Logout</a>
</div>

<!-- ✅ Main Content -->
<div class="container">

    <h2>Upload Retinal Fundus Image</h2>

    <form action="/result" method="post" enctype="multipart/form-data">
        <input type="file" name="image" required>
        <button type="submit">Run AI Prediction</button>
    </form>

    {% if prediction %}
        <div class="result">
            Prediction Result: <b>{{ prediction }}</b>
        </div>

        {% if img_path %}
            <img src="/{{ img_path }}">
        {% endif %}

        <!-- ✅ Detailed Explanation ⭐ VERY GOOD FOR FACULTY -->
        <div class="details-box">

    <p><b>Analysis Summary</b></p>
    <p>
        The uploaded fundus image was analyzed using a deep learning Xception model
        trained to identify diabetic retinal abnormalities.
    </p>

    <p><b>Clinical Interpretation</b></p>

    {% if prediction == "No_DR" %}
        <p>
            <b>No Diabetic Retinopathy Detected.</b><br>
            The model did not identify visible pathological signs of diabetic
            retinopathy. The retina appears healthy under model evaluation.
        </p>

    {% elif prediction == "Mild" %}
        <p>
            <b>Mild Diabetic Retinopathy.</b><br>
            Early-stage abnormalities such as microaneurysms may be present.
            Regular monitoring is recommended.
        </p>

    {% elif prediction == "Moderate" %}
        <p>
            <b>Moderate Diabetic Retinopathy.</b><br>
            Noticeable retinal lesions detected. Medical evaluation by an
            ophthalmologist is advisable.
        </p>

    {% elif prediction == "Severe" %}
        <p>
            <b>Severe Diabetic Retinopathy.</b><br>
            Significant retinal damage indicators detected. Immediate clinical
            assessment is strongly recommended.
        </p>

    {% elif prediction == "Proliferate_DR" %}
        <p>
            <b>Proliferative Diabetic Retinopathy.</b><br>
            Advanced stage detected. This condition carries a high risk of
            vision loss and requires urgent specialist attention.
        </p>
    {% endif %}

    <p><b>Important Note</b></p>
    <p>
        This prediction is generated by an AI model for academic demonstration
        purposes only and must not replace professional medical diagnosis.
    </p>

</div>

    {% endif %}

    <br><br>

    <a href="/logout">
        <button>Logout</button>
    </a>

</div>

</body>
</html>
